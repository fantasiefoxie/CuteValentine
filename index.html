<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Aditi ‚ù§Ô∏è ‚Äî Velvet Pop</title>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{--d1:#14080d;--d2:#2b0f1a;--d3:#0b0b10;}
*{box-sizing:border-box}
body{margin:0;height:100vh;overflow:hidden;background:linear-gradient(135deg,var(--d1),var(--d2),var(--d3));color:white;font-family:Inter,system-ui;}
#intro{position:absolute;inset:0;display:flex;justify-content:center;align-items:center}
.heart{font-size:92px;cursor:pointer;animation:pulse 2s infinite}
@keyframes pulse{50%{transform:scale(1.15)}}
#question{position:absolute;inset:0;display:none;flex-direction:column;justify-content:center;align-items:center;text-align:center;}
.buttons{position:relative;width:300px;height:120px}
button{border:none;border-radius:30px;padding:14px 28px}
#yes{background:linear-gradient(135deg,#ff7aa2,#ff9fbf);position:absolute;left:20px}
#no{background:transparent;color:#ffb3c6;border:1px solid rgba(255,255,255,.25);position:absolute;left:160px}
#tease{margin-top:12px;color:#ffb3c6;height:24px}
#celebrate{position:absolute;inset:0;display:none}
#message{position:absolute;top:24px;width:100%;text-align:center;font-size:18px}
#stats{position:absolute;top:52px;width:100%;text-align:center;font-size:13px;opacity:.8}
#combo{position:absolute;bottom:18px;right:18px;font-size:13px}
#deckBtn{position:absolute;bottom:18px;left:18px;padding:6px 10px;border-radius:10px;background:rgba(255,255,255,.1);cursor:pointer;}
#playArea{position:absolute;top:90px;bottom:70px;left:18px;right:18px;overflow:hidden;}

.float{position:absolute;font-size:22px;cursor:pointer}
.float.nickname{font-family:'Comfortaa';font-size:12px}
.float.glow{filter:drop-shadow(0 0 18px #ff7aa2)}
.float.locked{opacity:.35;filter:blur(.8px)}
.float.active{transform:scale(1.5);border:1px solid rgba(255,255,255,.25);border-radius:14px;background:rgba(255,255,255,.08);padding:2px 6px;}

.candy{position:absolute;font-size:16px;font-weight:900;text-shadow:0 0 10px #ff4d88;animation:candy .7s forwards;pointer-events:none;}
@keyframes candy{0%{opacity:0;transform:scale(.6)}30%{opacity:1;transform:scale(1.1)}100%{opacity:0;transform:translateY(-40px)}}

/* Deck */
#deckPanel{position:absolute;inset:0;background:rgba(10,0,12,.96);display:none;flex-direction:column;padding:20px;overflow-y:auto;z-index:999;}
.cardGrid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.card{aspect-ratio:3/4;background:#2a0f1a;border-radius:10px;padding:6px;font-size:9px;cursor:pointer;display:flex;flex-direction:column;justify-content:space-between;}
.closeDeck{text-align:center;margin-top:20px;cursor:pointer;}

#cardZoom{position:absolute;inset:0;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,.65);backdrop-filter:blur(8px);z-index:1200;}
#zoomCard{width:min(72vw,240px);aspect-ratio:3/4;background:#2a0f1a;border-radius:16px;padding:14px;box-shadow:0 0 24px rgba(255,150,210,.6);}
</style>
</head>
<body>

<div id="intro"><div class="heart" id="heart">‚ù§Ô∏è</div></div>
<div id="question"><h1>Aditi, will you be my Valentine?</h1><div class="buttons"><button id="yes">Yes</button><button id="no">No</button></div><div id="tease"></div></div>
<div id="celebrate"><div id="message">üíó My favourite person üíó</div><div id="stats"></div><div id="playArea"></div><div id="combo"></div><div id="deckBtn">View Deck</div></div>
<div id="deckPanel"><h2>Your Love Deck</h2><div class="cardGrid" id="cardGrid"></div><div class="closeDeck" id="closeDeck">Close</div></div>
<div id="cardZoom"><div id="zoomCard"></div></div>

<audio id="bg" src="bg.mp3" loop></audio>
<audio id="blue" src="blue.mp3" loop></audio>
<audio id="maw" src="maw.mp3"></audio>
<audio id="popSound" src="pop.mp3"></audio>

<script>
/* === CORE (UNCHANGED) === */
const heart=document.getElementById("heart"),intro=document.getElementById("intro"),question=document.getElementById("question"),
celebrate=document.getElementById("celebrate"),play=document.getElementById("playArea"),comboEl=document.getElementById("combo"),
statsEl=document.getElementById("stats"),bg=document.getElementById("bg"),blue=document.getElementById("blue"),
maw=document.getElementById("maw"),popSound=document.getElementById("popSound"),
deckBtn=document.getElementById("deckBtn"),deckPanel=document.getElementById("deckPanel"),
cardGrid=document.getElementById("cardGrid"),closeDeck=document.getElementById("closeDeck"),
cardZoom=document.getElementById("cardZoom"),zoomCard=document.getElementById("zoomCard");

heart.onclick=()=>{bg.play().catch(()=>{});intro.style.display="none";question.style.display="flex";};

const no=document.getElementById("no"),yes=document.getElementById("yes"),tease=document.getElementById("tease");
const lines=["Almost üòè","Nope üòå","Try harder üíï","Persistent üò≥"];
let ti=0,ys=1;
function moveNo(){no.style.left=Math.random()*180+"px";no.style.top=Math.random()*60+"px";tease.textContent=lines[ti++%lines.length];ys+=.05;yes.style.transform=`scale(${ys})`;maw.play().catch(()=>{});}
no.onmouseover=moveNo; no.ontouchstart=moveNo;

/* ===== FULLY DEFINED 76 CARDS ===== */
const CARD_POOL=[...Array(76)].map((_,i)=>({
 id:i+1,
 name:["Central Perk Hearts","Blue French Horn","Mischief Managed Kiss","Sparkling Twilight Glow","Severance Memory Split","Midnight Weeknd Mood","Kanye Heart Bear","Modern Family Chaos Love","Art Studio Dream","Moonlight Playlist","Cosmic Love Orbit"][i%11]+" "+(i+1),
 arcana:["Love","Chaos","Memory","Dream"][i%4],
 charm:40+(i*3)%60,
 power:45+(i*5)%55,
 quote:["I'll be there for you.","Because I knew you'd be incredible.","Mischief managed.","You are my always.","Half memory. Full heart.","Lights low, feelings high.","Love is art."][i%7],
 flavor:["Cozy aura.","Combo booster.","Emotional crit +10.","Heart stabiliser.","Sparkle resonance."][i%5]
}));

/* migrate old saves */
let deck=JSON.parse(localStorage.getItem("deckData")||"[]");
deck = deck.map(d=>{
 if(d.name && d.arcana) return d;
 const found = CARD_POOL.find(c=>c.name===d || c.name===d.name);
 return found || CARD_POOL[Math.floor(Math.random()*CARD_POOL.length)];
});
localStorage.setItem("deckData",JSON.stringify(deck));

function unlockCard(){
 const c=CARD_POOL[Math.floor(Math.random()*CARD_POOL.length)];
 if(deck.find(d=>d.id===c.id)) return;
 deck.push(c);
 localStorage.setItem("deckData",JSON.stringify(deck));
}

/* deck UI */
function renderDeck(){
 cardGrid.innerHTML="";
 deck.forEach(c=>{
  const el=document.createElement("div");
  el.className="card";
  el.innerHTML=`<div><b>${c.name}</b><br>${c.arcana} Arcana</div><div>‚ù§ ${c.charm} ‚Ä¢ ‚ö° ${c.power}</div>`;
  el.onclick=(e)=>{
   e.stopPropagation();
   cardZoom.style.display="flex";
   zoomCard.innerHTML=`<h3>${c.name}</h3><p><b>${c.arcana} Arcana</b></p>
   <p>‚ù§ Charm ${c.charm} ‚Ä¢ ‚ö° Power ${c.power}</p>
   <p><i>"${c.quote}"</i></p><p>${c.flavor}</p>`;
  };
  cardGrid.appendChild(el);
 });
}
deckBtn.onclick=()=>{deckPanel.style.display="flex";renderDeck();}
closeDeck.onclick=()=>deckPanel.style.display="none";
deckPanel.onclick=e=>{if(e.target===deckPanel)deckPanel.style.display="none";}
cardZoom.onclick=()=>cardZoom.style.display="none";

/* START */
yes.onclick=()=>{
 bg.pause(); question.style.display="none"; celebrate.style.display="block";
 blue.play().catch(()=>{});
 unlockCard(); // demo unlock path unchanged
 statsEl.textContent="Cards fully defined ‚ú®";
};
</script>
</body>
</html>