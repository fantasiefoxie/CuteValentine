<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aditi ‚ù§Ô∏è Valentine</title>

<style>
:root{
  --bg1:#0f0510;
  --bg2:#1c0820;
  --accent:#ff4da6;
  --soft:#ff9ecf;
}

*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  background:radial-gradient(circle at top,var(--bg2),var(--bg1));
  font-family:Inter,system-ui;
  color:white;
}

/* ---------- CARD PAGE 1 ---------- */
.card{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
}
h1{color:var(--accent);margin:0;font-size:32px}
h2{margin:10px 0 25px;color:#ffc2e4;font-weight:400}

button{
  border:none;
  border-radius:30px;
  padding:14px 30px;
  font-size:16px;
  cursor:pointer;
  transition:.2s;
}
#yes{
  background:linear-gradient(135deg,#ff4da6,#ff82c4);
  color:black;
}
#no{
  position:absolute;
  background:transparent;
  color:#ff9ecf;
  border:1px solid #ff9ecf;
}
.tease{
  margin-top:25px;
  height:20px;
  color:#ff9ecf;
  font-size:14px;
}

/* ---------- PAGE 2 ---------- */
#celebrate{
  position:absolute;
  inset:0;
  display:none;
}

.topMessage{
  position:absolute;
  top:20px;
  width:100%;
  text-align:center;
  font-size:22px;
  color:#ffd4ef;
  opacity:1;
  transition:opacity 2s;
}

#comboDisplay{
  position:absolute;
  bottom:20px;
  right:20px;
  text-align:right;
  font-size:14px;
  color:#ffc2e4;
}

.float{
  position:absolute;
  cursor:pointer;
  user-select:none;
  font-size:28px;
  transition:transform .2s;
}

.pop{
  animation:pop .3s forwards;
}
@keyframes pop{
  0%{transform:scale(1)}
  50%{transform:scale(1.6)}
  100%{transform:scale(.2);opacity:0}
}

.yummy{
  position:absolute;
  font-weight:800;
  font-size:22px;
  color:white;
  text-shadow:0 0 10px var(--accent);
  animation:rise 1s forwards;
}
@keyframes rise{
  0%{opacity:0;transform:translateY(0)}
  30%{opacity:1}
  100%{opacity:0;transform:translateY(-50px)}
}

/* ---------- DECK ---------- */
#deckViewer{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:90%;
  max-width:500px;
  max-height:70%;
  overflow:auto;
  background:#140818;
  border-radius:20px;
  padding:20px;
  display:none;
}
.cardItem{
  background:#1e0d22;
  padding:10px;
  margin-bottom:10px;
  border-radius:12px;
  font-size:14px;
}

.topRight{
  position:absolute;
  top:15px;
  right:15px;
  display:flex;
  gap:10px;
}
.smallBtn{
  background:#2a0f30;
  color:#ffc2e4;
  border-radius:20px;
  padding:6px 12px;
  font-size:12px;
}

</style>
</head>
<body>

<div class="card" id="card">
  <h1>Aditi</h1>
  <h2>Will you be my Valentine?</h2>
  <button id="yes">Yes</button>
  <button id="no">No</button>
  <div class="tease" id="tease"></div>
</div>

<div id="celebrate">
  <div class="topMessage" id="topMessage">
    üíó Happy Valentine's Day, Aditi üíó
  </div>

  <div class="topRight">
    <button class="smallBtn" id="deckBtn">Deck</button>
    <button class="smallBtn" id="statsBtn">Stats</button>
  </div>

  <div id="comboDisplay"></div>
</div>

<div id="deckViewer"></div>

<audio id="bg" src="bg.mp3" loop muted autoplay></audio>
<audio id="popSound" src="pop.mp3"></audio>

<script>

/* ---------- AUDIO ---------- */
const bg=document.getElementById("bg");
function unlockAudio(){
  bg.muted=false;
  bg.play().catch(()=>{});
  window.removeEventListener("click",unlockAudio);
}
window.addEventListener("click",unlockAudio);

/* ---------- PAGE 1 CHASE ---------- */
const noBtn=document.getElementById("no");
const tease=document.getElementById("tease");
const teaseLines=[
"Nice try üòå",
"You can't catch me üíï",
"Persistent huh üòè",
"Just press yes üíó"
];
let teaseIndex=0;

function moveNo(){
  noBtn.style.left=Math.random()*(window.innerWidth-80)+"px";
  noBtn.style.top=Math.random()*(window.innerHeight-40)+"px";
  tease.textContent=teaseLines[teaseIndex++%teaseLines.length];
}
noBtn.addEventListener("mouseenter",moveNo);

/* ---------- PAGE 2 ---------- */
const celebrate=document.getElementById("celebrate");
const topMessage=document.getElementById("topMessage");
const comboDisplay=document.getElementById("comboDisplay");
const deckViewer=document.getElementById("deckViewer");

const FOOD=["üç´","üçï","üßá"];
const FLOWERS=["üåπ","üåª","üíã"];
const NICKNAMES=["Cutiepie üíñ","Sugarplum üíó","Floof ‚òÅÔ∏è"];
const ANIMALS=["üê±","üß∏","üê¢"];

const floatPool=[...FOOD,...FLOWERS,...NICKNAMES,...ANIMALS];

let objs=[];
let popCount=parseInt(localStorage.getItem("lifetimePops"))||0;
let combo=0;
let highestCombo=parseInt(localStorage.getItem("highestCombo"))||0;
let multiplier=1;
let comboDecay;

/* ---------- FLOAT LOGIC ---------- */
function createFloat(){
  const text=floatPool[Math.floor(Math.random()*floatPool.length)];
  const el=document.createElement("div");
  el.className="float";
  el.textContent=text;
  celebrate.appendChild(el);

  const o={
    el,
    x:Math.random()*(window.innerWidth-40),
    y:Math.random()*(window.innerHeight-100)+80,
    vx:(Math.random()-.5)*1.2,
    vy:(Math.random()-.5)*1.2,
    type:text
  };

  el.addEventListener("click",()=>{
    popFloat(o);
  });

  objs.push(o);
}

function popFloat(o){
  o.el.classList.add("pop");
  setTimeout(()=>o.el.remove(),300);

  combo++;
  multiplier=1+combo*0.05;

  if(combo>highestCombo){
    highestCombo=combo;
    localStorage.setItem("highestCombo",highestCombo);
  }

  popCount+=Math.floor(multiplier);
  localStorage.setItem("lifetimePops",popCount);

  showYummy(o.x,o.y);

  resetDecay();

  objs=objs.filter(x=>x!==o);

  if(objs.length<10){
    createFloat();
  }

  updateDisplay();
  maybeDropCard();
}

function showYummy(x,y){
  const el=document.createElement("div");
  el.className="yummy";
  el.style.left=x+"px";
  el.style.top=y+"px";
  el.textContent="Sweet!";
  celebrate.appendChild(el);
  setTimeout(()=>el.remove(),1000);
}

function resetDecay(){
  clearTimeout(comboDecay);
  comboDecay=setTimeout(()=>{
    combo=Math.max(0,combo-1);
    updateDisplay();
    if(combo>0) resetDecay();
  },1500);
}

function updateDisplay(){
  comboDisplay.innerHTML=
  `Combo: ${combo}<br>
   Multiplier: x${multiplier.toFixed(1)}<br>
   Lifetime Pops: ${popCount}`;
}

/* ---------- CARDS ---------- */
let deck=JSON.parse(localStorage.getItem("deck"))||[];

function maybeDropCard(){
  let chance=Math.min(0.10+combo*0.01,0.25);
  if(Math.random()<chance){
    const cardName="Romantic Aura "+Math.floor(Math.random()*999);
    deck.push(cardName);
    localStorage.setItem("deck",JSON.stringify(deck));
  }
}

document.getElementById("deckBtn").onclick=()=>{
  deckViewer.style.display=deckViewer.style.display==="block"?"none":"block";
  deckViewer.innerHTML="<h3>Your Deck</h3>";
  deck.forEach(c=>{
    deckViewer.innerHTML+=`<div class="cardItem">${c}</div>`;
  });
};

/* ---------- START PAGE 2 ---------- */
document.getElementById("yes").onclick=()=>{
  document.getElementById("card").style.display="none";
  celebrate.style.display="block";

  setTimeout(()=>{
    topMessage.style.opacity=0;
  },4000);

  for(let i=0;i<15;i++) createFloat();

  animate();
};

/* ---------- FLOAT ANIMATION ---------- */
function animate(){
  objs.forEach(o=>{
    o.x+=o.vx;
    o.y+=o.vy;
    if(o.x<0||o.x>window.innerWidth-40) o.vx*=-1;
    if(o.y<60||o.y>window.innerHeight-40) o.vy*=-1;
    o.el.style.left=o.x+"px";
    o.el.style.top=o.y+"px";
  });
  requestAnimationFrame(animate);
}

</script>
</body>
</html>