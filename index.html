<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aditi ‚ù§Ô∏è Valentine</title>

<style>
:root{
  --bg1:#14080d;--bg2:#2b0f1a;--bg3:#0b0b10;
  --accent:#ff7aa2;--soft:#ffd1dc;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:Inter,system-ui,sans-serif;
  background:
    radial-gradient(1200px circle at 20% 10%, #2a1020 0%, transparent 50%),
    linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  color:white;
}

/* INTRO HEART */

#intro{
  position:fixed;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:inherit;
  z-index:10;
}

#heartReveal{
  font-size:120px;
  cursor:pointer;
  animation:glow 2.5s infinite ease-in-out;
}

@keyframes glow{
  0%{transform:scale(1); text-shadow:0 0 20px #ff7aa2;}
  50%{transform:scale(1.08); text-shadow:0 0 50px #ff7aa2;}
  100%{transform:scale(1); text-shadow:0 0 20px #ff7aa2;}
}

/* CARD PAGE 1 */

.card{
  display:none;
  text-align:center;
  width:min(90vw,420px);
}

h1{color:var(--accent);margin:0}
h2{color:#c9a3b2;margin-top:12px}

.buttons{
  position:relative;
  height:120px;
  margin-top:20px;
}

button{
  padding:14px 30px;
  border-radius:999px;
  border:none;
  font-size:16px;
  cursor:pointer;
}

#yes{
  background:linear-gradient(135deg,#ff7aa2,#ff9fbf);
  position:absolute;
  left:10%;
}

#no{
  position:fixed;
  left:60%;
  top:55%;
  background:transparent;
  border:1px solid rgba(255,255,255,.2);
  color:#ddd;
}

.tease{
  margin-top:20px;
  color:#ffb3c6;
  min-height:24px;
}

/* PAGE 2 */

#celebrate{
  position:fixed;
  inset:0;
  display:none;
}

.topMessage{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  text-align:center;
  pointer-events:none;
}

.topMessage h1{
  font-size:24px;
  margin:0;
  color:var(--soft);
}

.multiplier{
  margin-top:6px;
  font-size:16px;
  opacity:.8;
  transition:.3s;
}

.stats{
  position:fixed;
  bottom:15px;
  right:15px;
  font-size:14px;
  opacity:.8;
  text-align:right;
}

.hintBtn{
  position:fixed;
  bottom:15px;
  left:15px;
  font-size:14px;
  opacity:.8;
  cursor:pointer;
}

.float{
  position:absolute;
  cursor:pointer;
  user-select:none;
  z-index:5;
  transition:transform .2s;
}

.float.big{font-size:64px}
.float.small{font-size:38px}

.pop{
  animation:popOut .25s forwards;
}

@keyframes popOut{
  0%{transform:scale(1);opacity:1}
  100%{transform:scale(.2);opacity:0}
}

.heartBurst{
  position:fixed;
  font-size:22px;
  animation:fall 2s linear forwards;
}

@keyframes fall{
  0%{transform:translateY(-20px);opacity:1}
  100%{transform:translateY(100vh);opacity:0}
}

.floatWindow{
  position:absolute;
  top:120px;
  bottom:100px;
  left:0;
  right:0;
}
</style>
</head>

<body>

<div id="intro">
  <div id="heartReveal">üíó</div>
</div>

<div class="card" id="card">
  <h1>Aditi</h1>
  <h2>Will you be my Valentine?</h2>
  <div class="buttons">
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </div>
  <div class="tease" id="tease"></div>
</div>

<div id="celebrate">
  <div class="topMessage">
    <h1>üíó Always you. Every timeline. üíó<br>Happy Valentine‚Äôs Day, Aditi ‚ù§Ô∏è</h1>
    <div class="multiplier" id="multi">Combo x1</div>
  </div>

  <div class="floatWindow" id="floatWindow"></div>

  <div class="stats" id="stats"></div>
  <div class="hintBtn" id="hintBtn">‚ùì Hint</div>
</div>

<audio id="bg" src="bg.mp3" loop></audio>
<audio id="maw" src="maw.mp3"></audio>
<audio id="blue" src="blue.mp3" loop></audio>
<audio id="popSound" src="pop.mp3"></audio>

<script>

/* AUDIO */

const bg=document.getElementById("bg");
const maw=document.getElementById("maw");
const blue=document.getElementById("blue");
const popSound=document.getElementById("popSound");

document.getElementById("heartReveal").onclick=()=>{
  bg.play().catch(()=>{});
  document.getElementById("intro").style.display="none";
  document.getElementById("card").style.display="block";
};

/* CHASE */

const noBtn=document.getElementById("no");
const tease=document.getElementById("tease");
const teaseLines=["Almost üòè","You‚Äôre fast üòå","Persistent huh üò≥","This is cardio üèÉ‚Äç‚ôÄÔ∏è"];
let teaseIndex=0;

function moveNo(){
  noBtn.style.left=Math.random()*(innerWidth-100)+"px";
  noBtn.style.top=Math.random()*(innerHeight-50)+"px";
  tease.textContent=teaseLines[teaseIndex++%teaseLines.length];
  maw.currentTime=0;
  maw.play().catch(()=>{});
}

document.addEventListener("mousemove",e=>{
  const r=noBtn.getBoundingClientRect();
  if(Math.hypot(e.clientX-(r.left+r.width/2),
                e.clientY-(r.top+r.height/2))<90)
    moveNo();
});

/* GAME */

const floatWindow=document.getElementById("floatWindow");
const multi=document.getElementById("multi");
const stats=document.getElementById("stats");

const pool=["üç´","üåπ","üíã","üê±","üß∏","Gumball üíï","Cutiepie üíñ"];

let objs=[];
let popCount=0;
let lifetime=parseInt(localStorage.getItem("lifetime")||0);
let combo=1;
let streak=0;
let lastCat=null;
let decayTimer=null;

function updateStats(){
  stats.innerHTML=`Pops: ${popCount} üíï<br>Lifetime: ${lifetime} ‚ú®`;
}

function getCategory(t){
  if(["üç´"].includes(t)) return "food";
  if(["üåπ","üíã"].includes(t)) return "flower";
  if(t.includes("üíï")||t.includes("üíñ")) return "nickname";
  return "animal";
}

function spawnFloat(){
  const el=document.createElement("div");
  const text=pool[Math.floor(Math.random()*pool.length)];
  el.textContent=text;
  el.className="float "+(window.innerWidth<600?"small":"big");
  floatWindow.appendChild(el);

  const o={
    el,
    x:Math.random()*(floatWindow.clientWidth-60),
    y:Math.random()*(floatWindow.clientHeight-60),
    vx:(Math.random()>.5?1:-1)*.6,
    vy:(Math.random()>.5?1:-1)*.6,
    type:text
  };

  el.onclick=()=>{
    handlePop(o);
  };

  objs.push(o);
}

function handlePop(o){
  o.el.classList.add("pop");
  popSound.currentTime=0;
  popSound.play().catch(()=>{});

  const cat=getCategory(o.type);

  if(cat===lastCat){
    streak++;
  } else {
    streak=1;
    lastCat=cat;
  }

  combo=Math.max(1,combo + (streak>=3?1:0));

  if(combo%5===0){
    heartBurst();
  }

  clearTimeout(decayTimer);
  decayTimer=setTimeout(()=>{
    combo=Math.max(1,combo-1);
    multi.textContent=`Combo x${combo}`;
  },2000);

  popCount++;
  lifetime++;
  localStorage.setItem("lifetime",lifetime);

  multi.textContent=`Combo x${combo}`;
  updateStats();

  setTimeout(()=>{
    o.el.remove();
    objs=objs.filter(x=>x!==o);
    spawnFloat();
  },250);
}

function heartBurst(){
  for(let i=0;i<10;i++){
    const h=document.createElement("div");
    h.textContent="üíñ";
    h.className="heartBurst";
    h.style.left=Math.random()*100+"%";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),2000);
  }
}

function animate(){
  objs.forEach(o=>{
    o.x+=o.vx;
    o.y+=o.vy;
    if(o.x<0||o.x>floatWindow.clientWidth-60)o.vx*=-1;
    if(o.y<0||o.y>floatWindow.clientHeight-60)o.vy*=-1;
    o.el.style.transform=`translate(${o.x}px,${o.y}px)`;
  });
  requestAnimationFrame(animate);
}
animate();

document.getElementById("yes").onclick=()=>{
  bg.pause();
  document.getElementById("card").style.display="none";
  document.getElementById("celebrate").style.display="block";
  blue.play().catch(()=>{});
  for(let i=0;i<10;i++) spawnFloat();
  updateStats();
};

document.getElementById("hintBtn").onclick=()=>{
  alert("Pop 3 of the same type in a row to grow your combo üíû\nKeep the rhythm to avoid decay!");
};

</script>
</body>
</html>